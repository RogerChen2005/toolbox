(function(){"use strict";var e={8688:function(e,t,s){var l=s(9242),o=s(3396);function a(e,t,s,l,a,i){const n=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(n)}s(7658);window.htmlClasses=[],window.addHtmlclasses=e=>{let t=window.htmlClasses.indexOf(e);-1===t&&(window.htmlClasses.push(e),document.getElementsByTagName("html")[0].className=window.htmlClasses.join(" "))},window.delHtmlclasses=e=>{let t=window.htmlClasses.indexOf(e);-1!=t&&(window.htmlClasses.splice(t,1),document.getElementsByTagName("html")[0].className=window.htmlClasses.join(" "))};var i={name:"App",data(){return{index:0}},methods:{change(e){this.index=e}},created(){let e=localStorage.getItem("wordsets");window.wordsets=e?JSON.parse(e):{};let t=localStorage.getItem("bgimg");t&&(document.body.style.backgroundImage=`url("${t}")`,document.body.style.backgroundSize="cover",window.addHtmlclasses("bgimged"));const s=window.matchMedia("(prefers-color-scheme: dark)");s.matches&&window.addHtmlclasses("dark"),s.addEventListener("change",(e=>{e.matches?window.addHtmlclasses("dark"):window.delHtmlclasses("dark")}))}},n=s(89);const d=(0,n.Z)(i,[["render",a]]);var r=d,c=s(7074),w=(s(4415),s(3942),s(7144),s(2483)),u=s(7139);const m=e=>((0,o.dD)("data-v-c4a3dd6a"),e=e(),(0,o.Cn)(),e),h=m((()=>(0,o._)("span",{class:"text-large font-600 mr-3"}," 编辑单词本 ",-1))),p={class:"no"},g={key:0,class:"colbox",if:"sets-container"},_={class:"colbox wordclass"},f={class:"no"},v={class:"title"},k={style:{"font-size":"17px","font-weight":"200"}},y={class:"option"},b={key:1,id:"new",class:"rowbox"},x=m((()=>(0,o._)("span",{class:"text-large font-600 mr-3"}," 新建单词本 ",-1))),W={class:"colbox"},C=m((()=>(0,o._)("div",{class:"mid-text"},"名称:",-1))),S=m((()=>(0,o._)("div",{class:"mid-text"},"分组:",-1))),V={key:1,class:"container",style:{overflow:"auto"}},O={class:"text-large font-600 mr-3"},U={class:"colbox",style:{"margin-top":"20px"}},z={class:"rowbox"},j={class:"card",style:{"margin-bottom":"20px"}},I=m((()=>(0,o._)("div",{class:"title"},"添加单词",-1))),D={class:"colbox"},N={class:"colbox"},H={class:"card"},$=m((()=>(0,o._)("div",{class:"title"},"更改名称",-1))),J={class:"colbox"},q={style:{width:"100%"},class:"card"},Y={style:{display:"flex","flex-direction":"row","justify-content":"space-around"}},A=m((()=>(0,o._)("div",{class:"title"},"修改单词",-1))),B={class:"colbox"},T={class:"colbox"};function E(e,t,s,l,a,i){const n=(0,o.up)("el-page-header"),d=(0,o.up)("box-icon"),r=(0,o.up)("el-button"),c=(0,o.up)("el-header"),w=(0,o.up)("el-collapse-item"),m=(0,o.up)("el-collapse"),E=(0,o.up)("el-input"),K=(0,o.up)("el-option"),L=(0,o.up)("el-select"),M=(0,o.up)("el-main"),P=(0,o.up)("el-container"),Z=(0,o.up)("el-text"),F=(0,o.up)("el-table-column"),R=(0,o.up)("el-table"),G=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(n,{style:{margin:"20px"},onBack:i.back_home},{content:(0,o.w5)((()=>[h])),_:1},8,["onBack"]),a.mode<2?((0,o.wg)(),(0,o.j4)(P,{key:0,id:"main-container",class:"container card"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{id:"header",class:"colbox"},{default:(0,o.w5)((()=>[(0,o._)("div",p,"共有"+(0,u.zw)(Object.keys(this.wordsets).length)+"个单词集合",1),(0,o._)("div",null,[(0,o.Wm)(r,{onClick:i.export_set,type:"success"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"white",name:"export",size:"15px"}),(0,o.Uk)("导出")])),_:1},8,["onClick"]),(0,o.Wm)(r,{onClick:i.import_set,type:"warning"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"white",name:"import",size:"15px"}),(0,o.Uk)("导入")])),_:1},8,["onClick"]),(0,o.Wm)(r,{onClick:t[0]||(t[0]=e=>a.mode=1),type:"primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{color:"white",name:"plus"}),(0,o.Uk)("新建单词本")])),_:1})])])),_:1}),(0,o.Wm)(M,{id:"wordsets-container"},{default:(0,o.w5)((()=>[0===a.mode?((0,o.wg)(),(0,o.iD)("div",g,[(0,o.Wm)(m,{accordion:"",modelValue:a.active_set_class,"onUpdate:modelValue":t[1]||(t[1]=e=>a.active_set_class=e),style:{width:"100%",border:"none"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.wordsets,((e,t)=>((0,o.wg)(),(0,o.j4)(w,{title:t,key:t,name:t},{default:(0,o.w5)((()=>[(0,o._)("div",_,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e,((e,s)=>((0,o.wg)(),(0,o.iD)("div",{key:s,class:"wordset rowbox"},[(0,o._)("div",f,(0,u.zw)(s+1),1),(0,o._)("div",v,(0,u.zw)(e.name),1),(0,o._)("div",k," 创建日期："+(0,u.zw)(new Date(e.created).toLocaleString()),1),(0,o._)("div",y,[(0,o.Wm)(d,{class:"btn",name:"edit",color:"var(--text-color)",onClick:s=>i.edit(e,t)},null,8,["onClick"]),(0,o.Wm)(d,{class:"btn",name:"trash",color:"var(--text-color)",onClick:l=>i.del(t,e.id,s)},null,8,["onClick"])])])))),128))])])),_:2},1032,["title","name"])))),128))])),_:1},8,["modelValue"])])):(0,o.kq)("",!0),1===a.mode?((0,o.wg)(),(0,o.iD)("div",b,[(0,o.Wm)(n,{onBack:t[2]||(t[2]=e=>a.mode=0)},{content:(0,o.w5)((()=>[x])),_:1}),(0,o._)("div",W,[C,(0,o.Wm)(E,{modelValue:a.set_name,"onUpdate:modelValue":t[3]||(t[3]=e=>a.set_name=e)},null,8,["modelValue"]),S,(0,o.Wm)(L,{"allow-create":"",filterable:"",modelValue:a.new_set_class,"onUpdate:modelValue":t[4]||(t[4]=e=>a.new_set_class=e),class:"m-2",placeholder:"Select"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys(a.wordsets),(e=>((0,o.wg)(),(0,o.j4)(K,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,o.Wm)(r,{style:{width:"50%"},type:"primary",onClick:t[5]||(t[5]=e=>i.new_wordset())},{default:(0,o.w5)((()=>[(0,o.Uk)("创建")])),_:1})])):(0,o.kq)("",!0)])),_:1})])),_:1})):(0,o.kq)("",!0),2===a.mode?((0,o.wg)(),(0,o.iD)("div",V,[(0,o.Wm)(n,{onBack:t[6]||(t[6]=e=>a.mode=0)},{content:(0,o.w5)((()=>[(0,o._)("span",O,(0,u.zw)(a.editing.name)+" ("+(0,u.zw)(a.editing.id)+") ",1)])),_:1}),(0,o._)("div",U,[(0,o._)("div",z,[(0,o._)("div",j,[I,(0,o.Wm)(E,{ref:"input1",autofocus:"",onChange:t[7]||(t[7]=t=>i.focusnext(e.$refs.input2)),modelValue:a.new_word.word,"onUpdate:modelValue":t[8]||(t[8]=e=>a.new_word.word=e)},null,8,["modelValue"]),(0,o._)("div",D,[(0,o.Wm)(Z,{class:"mx-1",style:{width:"60px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("翻译:")])),_:1}),(0,o.Wm)(E,{ref:"input2",onChange:t[9]||(t[9]=t=>i.focusnext(e.$refs.input3)),modelValue:a.new_word.trans,"onUpdate:modelValue":t[10]||(t[10]=e=>a.new_word.trans=e)},null,8,["modelValue"])]),(0,o._)("div",N,[(0,o.Wm)(Z,{class:"mx-1",style:{width:"80px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("词性：")])),_:1}),(0,o.Wm)(L,{ref:"input3",modelValue:a.new_word.type,"onUpdate:modelValue":t[11]||(t[11]=e=>a.new_word.type=e),class:"m-2",placeholder:"Select"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.options,(e=>((0,o.wg)(),(0,o.j4)(K,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,o.Wm)(r,{onClick:t[12]||(t[12]=e=>i.add_word()),type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("添加")])),_:1})]),(0,o._)("div",H,[$,(0,o._)("div",J,[(0,o.Wm)(Z,{class:"mx-1",style:{width:"60px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("新名称:")])),_:1}),(0,o.Wm)(E,{modelValue:e.new_name,"onUpdate:modelValue":t[13]||(t[13]=t=>e.new_name=t)},null,8,["modelValue"])]),(0,o.Wm)(r,{onClick:t[14]||(t[14]=e=>i.change_name()),type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("更改名称")])),_:1})])]),(0,o._)("div",q,[(0,o.Wm)(R,{data:a.table,style:{"max-height":"550px",overflow:"auto","border-radius":"10px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{type:"index"}),(0,o.Wm)(F,{prop:"word",label:"单词"}),(0,o.Wm)(F,{prop:"type",label:"词性"}),(0,o.Wm)(F,{prop:"trans",label:"翻译"}),(0,o.Wm)(F,{width:"100px",fixed:"right",label:"操作"},{default:(0,o.w5)((e=>[(0,o._)("div",Y,[(0,o.Wm)(d,{color:"var(--text-color)",size:"14px",class:"btn",name:"trash",onClick:t=>i.del_word(e.$index)},null,8,["onClick"]),(0,o.Wm)(d,{color:"var(--text-color)",size:"14px",class:"btn",name:"edit-alt",onClick:t=>i.edit_word(e.$index)},null,8,["onClick"])])])),_:1})])),_:1},8,["data"])])])])):(0,o.kq)("",!0),(0,o.Wm)(G,{modelValue:a.word_editing,"onUpdate:modelValue":t[18]||(t[18]=e=>a.word_editing=e)},{default:(0,o.w5)((()=>[A,(0,o.Wm)(E,{modelValue:a.editing_word.word,"onUpdate:modelValue":t[15]||(t[15]=e=>a.editing_word.word=e)},null,8,["modelValue"]),(0,o._)("div",B,[(0,o.Wm)(Z,{class:"mx-1",style:{width:"60px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("翻译:")])),_:1}),(0,o.Wm)(E,{modelValue:a.editing_word.trans,"onUpdate:modelValue":t[16]||(t[16]=e=>a.editing_word.trans=e)},null,8,["modelValue"])]),(0,o._)("div",T,[(0,o.Wm)(Z,{class:"mx-1",style:{width:"80px"}},{default:(0,o.w5)((()=>[(0,o.Uk)("词性：")])),_:1}),(0,o.Wm)(L,{modelValue:a.editing_word.type,"onUpdate:modelValue":t[17]||(t[17]=e=>a.editing_word.type=e),class:"m-2",placeholder:"Select"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.options,(e=>((0,o.wg)(),(0,o.j4)(K,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,o.Wm)(r,{onClick:i.save_word,type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("更改")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])],64)}var K=s(7178),L=s(6e3),M=s(6666),P=s(4158),Z=s.n(P),F={name:"NoteEditor",data(){return{mode:0,wordsets:window.wordsets,set_name:"",new_set_class:"",editing:{},editingClass:"",new_word:{word:"",trans:"",type:"adj."},editing_word:{word:"",trans:"",type:"adj.",index:0},options:[{label:"adjective(adj.)",value:"adj."},{label:"verb(v.)",value:"v."},{label:"noun(n.)",value:"n."},{label:"adverb(adv.)",value:"adv."},{label:"prepositions(prep.)",value:"prep."},{label:"phrase(phr.)",value:"phr."}],table:[],active_set_class:"",word_editing:!1}},methods:{focusnext(e){e.focus()},back_home(){this.$router.push("/")},new_wordset(){if(!this.new_set_class)return void(0,K.z8)({message:"集合不能为空",type:"error"});this.wordsets[this.new_set_class]||(this.wordsets[this.new_set_class]=[]);let e=Z().v1();this.wordsets[this.new_set_class].push({name:this.set_name,created:(new Date).getTime(),id:e}),localStorage.setItem("wordsets",JSON.stringify(this.wordsets)),localStorage.setItem(e,JSON.stringify([])),this.mode=0},del(e,t,s){L.T.confirm("确定要删除吗？").then((()=>{localStorage.removeItem(t),this.wordsets[e].splice(s,1),this.wordsets[e].length||delete this.wordsets[e],localStorage.setItem("wordsets",JSON.stringify(this.wordsets)),(0,K.z8)(`已经删除 ${e} `)}))},edit(e,t){this.editing=e,this.table=JSON.parse(localStorage.getItem(e.id)),this.mode=2,this.editingClass=t},has_word(e){for(let t of this.table)if(t.word===e)return!0;return!1},add_word(){this.has_word(this.new_word.word)?(0,K.z8)({message:`单词 ${this.new_word.word} 已存在`,type:"error"}):(this.table.push(Object.assign({},this.new_word)),localStorage.setItem(this.editing.id,JSON.stringify(this.table)),(0,K.z8)({message:`已添加 ${this.new_word.word} (${this.new_word.type})`,type:"success"}),this.new_word.word="",this.new_word.trans="",this.$refs.input1.focus())},edit_word(e){this.editing_word=Object.assign({},this.table[e]),this.editing_word.index=e,this.word_editing=!0},save_word(){this.editing_word.word!=this.table[this.editing_word.index].word&&this.has_word(this.editing_word.word)?(0,K.z8)({message:`单词 ${this.new_word.word} 已存在`,type:"error"}):(this.table[this.editing_word.index]={word:this.editing_word.word,type:this.editing_word.type,trans:this.editing_word.trans},localStorage.setItem(this.editing.id,JSON.stringify(this.table)),(0,K.z8)({message:"已保存更改",type:"success"}),this.word_editing=!1)},change_name(){let e=this.editing.name;this.editing.name=this.new_name,localStorage.setItem("wordsets",JSON.stringify(this.wordsets)),(0,K.z8)({message:`已更改 ${e} 为 ${this.new_name}`,type:"success"})},del_word(e){let t=this.table[e].word.concat();this.table.splice(e,1),localStorage.setItem(this.editing.id,JSON.stringify(this.table)),(0,K.z8)({message:`已删除 ${t}`,type:"warning"})},async export_set(){let e=await window.showSaveFilePicker({types:[{description:"JSON file",accept:{"text/json":[".json"]}}]}),t=await e.createWritable(),s={wordsets:this.wordsets,words:{}};for(let l of Object.values(this.wordsets))for(let e of l){let t=localStorage.getItem(e.id);s.words[e.id]=t}t.write(JSON.stringify(s)),t.close()},async import_set(){let[e]=await window.showOpenFilePicker({types:[{description:"JSON file",accept:{"text/json":[".json"]}}]}),t=await e.getFile(),s=JSON.parse(await t.text()),l=0;for(let o of Object.keys(s.wordsets))for(let e of s.wordsets[o])localStorage.getItem(e.id)||(this.wordsets[o]||(this.wordsets[o]=[]),this.wordsets[o].push(e),localStorage.setItem(e.id,s.words[e.id]),l++);localStorage.setItem("wordsets",JSON.stringify(this.wordsets)),(0,M.bM)({type:"success",title:"添加成功",message:`已添加 ${l} 本单词本`})}},created(){this.active_set_class=Object.keys(this.wordsets)[0]}};const R=(0,n.Z)(F,[["render",E],["__scopeId","data-v-c4a3dd6a"]]);var G=R;const Q=e=>((0,o.dD)("data-v-b8789876"),e=e(),(0,o.Cn)(),e),X=Q((()=>(0,o._)("span",{class:"text-large font-600 mr-3"}," 背诵 ",-1))),ee={key:0,class:"container"},te={class:"card item"},se=Q((()=>(0,o._)("div",{class:"title"},"选择测验范围：",-1))),le={style:{"font-size":"18px","font-weight":"500"}},oe={class:"card item"},ae=Q((()=>(0,o._)("div",{class:"title",style:{"font-size":"35px"}},"继续上一次的背诵",-1))),ie={key:1,id:"test",class:"colbox"},ne={style:{"flex-grow":"1"},class:"card"},de={id:"status"},re={key:1,class:"answer"},ce={id:"explain"},we={id:"trans"},ue={id:"add-to-box",class:"card"},me={class:"colbox para"},he=Q((()=>(0,o._)("div",{class:"mid-text"},"分组:",-1))),pe={class:"colbox para"},ge=Q((()=>(0,o._)("div",{class:"mid-text"},"单词本:",-1)));function _e(e,t,s,l,a,i){const n=(0,o.up)("el-page-header"),d=(0,o.up)("el-checkbox"),r=(0,o.up)("el-checkbox-group"),c=(0,o.up)("el-button"),w=(0,o.up)("box-icon"),m=(0,o.up)("el-text"),h=(0,o.up)("el-option"),p=(0,o.up)("el-select");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(n,{style:{margin:"20px"},onBack:i.back_home},{content:(0,o.w5)((()=>[X])),_:1},8,["onBack"]),0===a.mode?((0,o.wg)(),(0,o.iD)("div",ee,[(0,o._)("div",te,[se,(0,o.Wm)(d,{modelValue:a.checkAll,"onUpdate:modelValue":t[0]||(t[0]=e=>a.checkAll=e),indeterminate:a.isIndeterminate,onChange:i.handleCheckAllChange,size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)("全选")])),_:1},8,["modelValue","indeterminate","onChange"]),(0,o.Wm)(r,{modelValue:a.checkedSets,"onUpdate:modelValue":t[1]||(t[1]=e=>a.checkedSets=e),onChange:i.handleChange},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.wordsets,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"set_radios",key:t},[(0,o._)("p",null,(0,u.zw)(t),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e,(e=>((0,o.wg)(),(0,o.j4)(d,{class:"checkbox",key:e.id,label:e.id,size:"large",border:""},{default:(0,o.w5)((()=>[(0,o._)("div",le,(0,u.zw)(e.name),1)])),_:2},1032,["label"])))),128))])))),128))])),_:1},8,["modelValue","onChange"]),(0,o.Wm)(c,{style:{margin:"20px",width:"50%"},type:"primary",onClick:i.init},{default:(0,o.w5)((()=>[(0,o.Uk)("开始背诵")])),_:1},8,["onClick"])]),(0,o._)("div",oe,[ae,(0,o.Wm)(c,{style:{margin:"20px",width:"50%"},type:"primary",onClick:i.last_recite},{default:(0,o.w5)((()=>[(0,o.Uk)("开始背诵")])),_:1},8,["onClick"])])])):(0,o.kq)("",!0),1===a.mode?((0,o.wg)(),(0,o.iD)("div",ie,[(0,o._)("div",ne,[(0,o._)("div",de,"背诵进度: "+(0,u.zw)(a.current+1)+"/"+(0,u.zw)(a.total),1),(0,o._)("div",null,[a.current===a.answered?((0,o.wg)(),(0,o.iD)("textarea",{key:0,autofocus:"",id:"input",onInput:t[2]||(t[2]=(...e)=>i.change&&i.change(...e)),class:"answer",spellcheck:"false"},"\n            ",32)):(0,o.kq)("",!0),a.current<a.answered?((0,o.wg)(),(0,o.iD)("div",re,(0,u.zw)(a.word.word),1)):(0,o.kq)("",!0)]),(0,o._)("p",ce,[a.current>0?((0,o.wg)(),(0,o.j4)(c,{key:0,onClick:i.prev},{default:(0,o.w5)((()=>[(0,o.Uk)("上一个")])),_:1},8,["onClick"])):(0,o.kq)("",!0),a.current<a.answered?((0,o.wg)(),(0,o.j4)(c,{key:1,onClick:i.next},{default:(0,o.w5)((()=>[(0,o.Uk)("下一个")])),_:1},8,["onClick"])):(0,o.kq)("",!0),a.current===a.answered?((0,o.wg)(),(0,o.j4)(c,{key:2,onClick:i.showAnswer},{default:(0,o.w5)((()=>[(0,o.Uk)("显示答案")])),_:1},8,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(c,{onClick:i.terminate,type:"danger"},{default:(0,o.w5)((()=>[(0,o.Uk)("停止背诵")])),_:1},8,["onClick"]),(0,o.Wm)(w,{color:"var(--text-color)",class:"btn",style:{"margin-left":"10px",translate:"0 4px"},onClick:i.audio_play,name:"volume-full"},null,8,["onClick"])]),(0,o._)("div",we,(0,u.zw)(a.word.type)+" "+(0,u.zw)(a.word.trans),1)]),(0,o._)("div",ue,[(0,o.Wm)(m,{class:"mx-1",style:{"font-size":"35px","font-weight":"800"}},{default:(0,o.w5)((()=>[(0,o.Uk)("加入至")])),_:1}),(0,o._)("div",me,[he,(0,o.Wm)(p,{modelValue:a.set_class,"onUpdate:modelValue":t[3]||(t[3]=e=>a.set_class=e),class:"m-2",placeholder:"Select"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.keys(a.wordsets),(e=>((0,o.wg)(),(0,o.j4)(h,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,o._)("div",pe,[ge,(0,o.Wm)(p,{modelValue:a.set_id,"onUpdate:modelValue":t[4]||(t[4]=e=>a.set_id=e),class:"m-2",placeholder:"Select"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.wordsets[a.set_class],(e=>((0,o.wg)(),(0,o.j4)(h,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,o.Wm)(c,{onClick:i.add_to,type:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("添加")])),_:1},8,["onClick"])])])):(0,o.kq)("",!0)],64)}var fe={name:"WordRecite",data(){return{mode:0,allsets:[],wordsets:window.wordsets,checkedSets:[],isIndeterminate:!1,checkAll:!1,testWords:[],seq:[],total:0,current:0,answered:0,word:{},set_class:"",set_id:""}},methods:{handleCheckAllChange(e){this.checkedSets=e?this.allsets:[],this.isIndeterminate=!1},handleChange(e){console.log(this.checkedSets),this.checkAll=e.length===this.allsets.length,this.isIndeterminate=e.length>0&&e.length<this.allsets.length},init(){if(this.checkedSets.length<=0)return void(0,K.z8)({message:"请至少选择一个单词本",type:"error"});let e=(new Date).getTime();this.testWords=[];for(let s of this.checkedSets){let e=JSON.parse(localStorage.getItem(s));this.testWords=this.testWords.concat(...e)}if(localStorage.setItem("lastrecite",JSON.stringify({checkedSets:this.checkedSets,seed:e})),this.total=this.testWords.length,0===this.total)return void(0,K.z8)({message:"单词本为空",type:"error"});let t=Array.from(new Array(this.total).keys());for(let s=this.total-1;s>0;s--)[t[s],t[e%s]]=[t[e%s],t[s]];this.seq=t,this.current=0,this.answered=0,this.mode=1,(0,o.Y3)((()=>{this.show()}))},last_recite(){let e=JSON.parse(localStorage.getItem("lastrecite"));if(!e)return void(0,K.z8)({message:"没有记录",type:"error"});this.testWords=[];for(let l of e.checkedSets){let e=localStorage.getItem(l);if(!e)return void(0,K.z8)({message:"单词本不存在",type:"error"});this.testWords=this.testWords.concat(...JSON.parse(e))}this.total=this.testWords.length;let t=Array.from(new Array(this.total).keys());for(let l=this.total-1;l>0;l--)[t[l],t[e.seed%l]]=[t[e.seed%l],t[l]];this.seq=t;let s=Number(localStorage.getItem("lastcurrent"));this.current=s,this.answered=s,this.mode=1,(0,o.Y3)((()=>{this.show()}))},next(){if(this.current++,this.current===this.total)return this.mode=0,void(0,M.bM)({message:"您已完成所有单词的背诵",title:"Congratulations!",type:"success"});(0,o.Y3)((()=>{this.show()}))},prev(){this.current--,this.show()},showAnswer(){(0,K.z8)(`答案：${this.word.word}`)},show(){if(this.word=this.testWords[this.seq[this.current]],console.log(this.word),this.current===this.answered){let e=document.getElementById("input");e.value="_".repeat(this.word.word.length),e.setSelectionRange(0,0),e.style.height=`${e.scrollHeight}px`}},change(){let e,t=document.getElementById("input"),s=t.value,l=s.indexOf("_");if(l==this.word.word.length){if(s.substring(0,s.length-1).toLowerCase()==this.word.word.toLowerCase())return(0,K.z8)({title:"Success",message:"正确",type:"success"}),this.answered++,localStorage.setItem("lastcurrent",this.answered.toString()),void this.next();(0,K.z8)({title:"Error",message:"错误",type:"error"}),e="_".repeat(this.word.word.length),l=0}else-1==l?e="_".repeat(this.word.word.length):(e=s.substring(0,l),e+="_".repeat(this.word.word.length-l));t.value=e,t.setSelectionRange(l,l),t.style.height=`${t.scrollHeight}px`,t.focus()},audio_play(){var e=new Audio("https://dict.youdao.com/dictvoice?audio="+this.word.word);e.play()},terminate(){L.T.confirm("确定要终止吗？").then((()=>{this.mode=0,(0,M.bM)({message:"背诵已终止",type:"info",title:"Terminate"})}))},back_home(){this.$router.push("/")},add_to(){let e=JSON.parse(localStorage.getItem(this.set_id));return e.push(this.word),localStorage.setItem(this.set_id,JSON.stringify(e)),(0,K.z8)({message:`已添加 ${this.word.word} (${this.word.type})`,type:"success"})}},created(){for(let e of Object.values(window.wordsets))for(let t of e)this.allsets.push(t.id);console.log(this.allsets)}};const ve=(0,n.Z)(fe,[["render",_e],["__scopeId","data-v-b8789876"]]);var ke=ve;const ye=e=>((0,o.dD)("data-v-e7354b50"),e=e(),(0,o.Cn)(),e),be=ye((()=>(0,o._)("div",{id:"ball"},null,-1))),xe={class:"container"},We={id:"main"},Ce=ye((()=>(0,o._)("div",{id:"title"},"WordIn",-1))),Se={class:"colbox"},Ve={id:"setting"},Oe=ye((()=>(0,o._)("div",{class:"title"},"更换自定义背景",-1))),Ue={class:"colbox",style:{margin:"10px"}},ze=ye((()=>(0,o._)("div",{class:"title"},"黑暗模式",-1)));function je(e,t,s,l,a,i){const n=(0,o.up)("router-link"),d=(0,o.up)("box-icon"),r=(0,o.up)("el-input"),c=(0,o.up)("el-button"),w=(0,o.up)("el-switch"),u=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.iD)(o.HY,null,[be,(0,o._)("div",xe,[(0,o._)("div",We,[Ce,(0,o._)("div",Se,[(0,o.Wm)(n,{to:"/recite",class:"button"},{default:(0,o.w5)((()=>[(0,o.Uk)(" 背诵 ")])),_:1}),(0,o.Wm)(n,{to:"editor",class:"button"},{default:(0,o.w5)((()=>[(0,o.Uk)(" 编辑单词本 ")])),_:1})])])]),(0,o._)("div",Ve,[(0,o.Wm)(d,{class:"btn",color:"var(--text-color)",name:"cog",onClick:i.open_setting_dialog},null,8,["onClick"])]),(0,o.Wm)(u,{modelValue:a.settingVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>a.settingVisible=e),title:"设置"},{default:(0,o.w5)((()=>[Oe,(0,o._)("div",Ue,[(0,o.Wm)(r,{modelValue:a.img_url,"onUpdate:modelValue":t[0]||(t[0]=e=>a.img_url=e)},null,8,["modelValue"]),(0,o.Wm)(c,{type:"primary",style:{"margin-left":"10px"},onClick:i.set_bg},{default:(0,o.w5)((()=>[(0,o.Uk)("确定")])),_:1},8,["onClick"])]),ze,(0,o.Wm)(w,{onChange:i.toggleDark,modelValue:a.isdark,"onUpdate:modelValue":t[1]||(t[1]=e=>a.isdark=e),size:"large","active-text":"Dark","inactive-text":"Light"},null,8,["onChange","modelValue"])])),_:1},8,["modelValue"])],64)}var Ie={name:"HomePage",data(){return{img_url:"",settingVisible:!1,isdark:!1}},methods:{set_bg(){localStorage.setItem("bgimg",this.img_url),window.location.reload()},open_setting_dialog(){this.settingVisible=!0},toggleDark(){this.isdark?window.addHtmlclasses("dark"):window.delHtmlclasses("dark")}},created(){-1!=document.getElementsByTagName("html")[0].className.indexOf("dark")&&(this.isdark=!0)}};const De=(0,n.Z)(Ie,[["render",je],["__scopeId","data-v-e7354b50"]]);var Ne=De;const He=[{path:"/",component:Ne},{path:"/recite",component:ke},{path:"/editor",component:G}];var $e=(0,w.p7)({history:(0,w.r5)(),routes:He});const Je=(0,l.ri)(r);Je.use(c.Z),Je.use($e),Je.mount("#app")}},t={};function s(l){var o=t[l];if(void 0!==o)return o.exports;var a=t[l]={exports:{}};return e[l].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,l,o,a){if(!l){var i=1/0;for(c=0;c<e.length;c++){l=e[c][0],o=e[c][1],a=e[c][2];for(var n=!0,d=0;d<l.length;d++)(!1&a||i>=a)&&Object.keys(s.O).every((function(e){return s.O[e](l[d])}))?l.splice(d--,1):(n=!1,a<i&&(i=a));if(n){e.splice(c--,1);var r=o();void 0!==r&&(t=r)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[l,o,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var l in t)s.o(t,l)&&!s.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,a,i=l[0],n=l[1],d=l[2],r=0;if(i.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(d)var c=d(s)}for(t&&t(l);r<i.length;r++)a=i[r],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},l=self["webpackChunkwordin"]=self["webpackChunkwordin"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=s.O(void 0,[998],(function(){return s(8688)}));l=s.O(l)})();
//# sourceMappingURL=app.44356013.js.map