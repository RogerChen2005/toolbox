<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="../../ui.css" type="text/css" rel="stylesheet" />
    <link href="rd.css" rel="stylesheet" type="text/css"/>
    <script>
        var cnt = Array();
        var max = -1;
        var running = false;
        var myVar;
        temp = 0;
        function fun(){
            var numc = document.getElementById("total").value;
            myVar = setInterval(function () {
                    temp = Math.random() * numc + 1;
                    temp = Math.floor(temp);
                    document.getElementById("shownum").innerText = temp;
                },50);
        }
        function ran(){
            if(running){
                running = false;
                clearInterval(myVar);
                if(cnt[temp] >= 1){
                    document.getElementById("is").innerText = "已经被抽到过";
                    document.getElementById("is").style = "color:red;";
                    cnt[temp]+= 1;
                }else{
                    document.getElementById("is").innerText = "没有被抽到过";
                    document.getElementById("is").style = "color:black;";
                    cnt[temp] = 1
                }
                document.getElementById("history").innerHTML += temp;
                document.getElementById("history").innerHTML += " ";
                t = parseInt(cnt[temp]);
                if(t > max){
                    max = t;
                    document.getElementById("luckiest").innerHTML = temp+"是最幸运的，被抽到了"+cnt[temp]+"次";
                }
                else if (t == max){
                    var tmp = document.getElementById("luckiest").innerHTML;
                    document.getElementById("luckiest").innerHTML = temp + " " + tmp
                }
            }
            else{
                running = true;
                fun();
            }
        }
    </script>
</head>
<body>
    <div id="head">
        <span class="topele">
            <a id="mainico" class="toptext" href="../../index.html">rooger's toolbox</a>
        </span>
        <span class="topele">
            <a class="toptext" href="../../index.html">main</a>
        </span>
        <span class="topele">
            <a class="toptext" href="../../list.html">tool list</a>
        </span>
        <span class="topele">
            <a class="toptext" href="../../about.html">about me</a>
        </span>
    </div>
    <div id = "ad">
    More Functions,More Portable 
    <button id = "dapp"
    type="button"
    onclick="window.location.href='https://filedropper.com/d/s/MFveTUJOyvd1yJmYOR43YPT2dvcrib'"
    >Download Desktop App</button>
    </div>
    <div id = "mask" class = "main-window">
    </div>
    <div id = "cover" class = "main-window">
        <div id = "show" class = "sub-window">
            <div id = "num" class = "container">
                <div class = "side-bar">
                    Random
                </div>
                <div class="text">
                    <div id = "shownum">
                        0
                    </div>
                </div>
            </div>
            <div id = button class = "container">
                <div class = "side-bar">
                    Button
                </div>
                <div class = "text">
                    <button id = "btn" onclick="ran()">Click to Random</button>
                </div>
            </div>
            <div id = "settings" class = "container">
                <div class = "side-bar">
                    Settings
                </div>
                <div id = "settings-right">
                    <div>
                        总人数:<br/>
                        <input id = "total"/>
                    </div>
                    <div id = "is">没有被抽到过</div>
                </div>
            </div>
        </div>
        <div id = "bottomWindow" class = "sub-window">
            <div id = "history" class = "container">
                <div class = "side-bar">
                    History
                </div>
            </div>
            <div id = "luck" class = "container">
                <div class = "side-bar">
                    Luckiest
                </div>
                <div id = "luckiest">

                </div>
            </div>
        </div>
    </div>
    <script>
        document.getElementById("total").value = 45;
    </script>
</body>
</html>